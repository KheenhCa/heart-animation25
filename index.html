<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Đ ♥ Y - 1st Anniversary</title>
  <style>
    body {
      margin: 0;
      background: black;
      overflow: hidden;
    }
    canvas {
      display: block;
    }
  </style>
</head>
<body>
<canvas id="canvas"></canvas>
<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let particles = [];
let heartShape = [];
let stars = [];
let phase = 'scatter';
let timeStart = Date.now();

const centerX = canvas.width / 2;
const centerY = canvas.height / 2;

function generateHeartPoints() {
  const scale = 18; // Bigger heart
  for (let t = 0; t < Math.PI * 2; t += 0.015) {
    let x = scale * 16 * Math.pow(Math.sin(t), 3);
    let y = -scale * (13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t));
    heartShape.push({ x: centerX + x, y: centerY + y });
  }
}

function createParticles(count) {
  for (let i = 0; i < count; i++) {
    let angle = Math.random() * 2 * Math.PI;
    let radius = Math.random() * canvas.width * 0.75;
    particles.push({
      x: centerX + radius * Math.cos(angle),
      y: centerY + radius * Math.sin(angle),
      tx: 0, ty: 0,
      size: Math.random() * 2 + 1,
      speed: Math.random() * 0.015 + 0.005,
      color: `hsl(${Math.random() * 360}, 100%, 70%)`
    });
  }
}

function explodeParticles() {
  for (let p of particles) {
    p.vx = (Math.random() - 0.5) * 20;
    p.vy = (Math.random() - 0.5) * 20;
  }
}

function scatterStars() {
  for (let i = 0; i < 300; i++) {
    stars.push({
      x: Math.random() * canvas.width,
      y: Math.random() * canvas.height,
      size: Math.random() * 2,
      opacity: Math.random() * 0.4
    });
  }
}

function drawBackgroundStars() {
  for (let s of stars) {
    ctx.beginPath();
    ctx.arc(s.x, s.y, s.size, 0, Math.PI * 2);
    ctx.fillStyle = `rgba(255, 255, 255, ${s.opacity})`;
    ctx.fill();
  }
}

function animate() {
  ctx.fillStyle = "rgba(0, 0, 0, 0.2)";
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  drawBackgroundStars();

  const elapsed = Date.now() - timeStart;

  if (phase === 'scatter' && elapsed > 7000) {
    phase = 'form';
    particles.forEach((p, i) => {
      let t = heartShape[i % heartShape.length];
      p.tx = t.x;
      p.ty = t.y;
    });
  }

  if (phase === 'form' && elapsed > 13000) {
    phase = 'explode';
    explodeParticles();
  }

  if (phase === 'explode' && elapsed > 16000) {
    phase = 'final';
    scatterStars();
  }

  particles.forEach((p) => {
    if (phase === 'form') {
      p.x += (p.tx - p.x) * p.speed;
      p.y += (p.ty - p.y) * p.speed;
    } else if (phase === 'explode') {
      p.x += p.vx;
      p.y += p.vy;
      p.vx *= 0.96;
      p.vy *= 0.96;
    }

    ctx.beginPath();
    ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
    ctx.fillStyle = p.color;
    ctx.shadowBlur = 25;
    ctx.shadowColor = p.color;
    ctx.fill();
  });

  if (phase === 'final') {
    const flicker = 0.4 + 0.6 * Math.abs(Math.sin(Date.now() / 300));
    ctx.font = 'bold 56px Arial';
    ctx.fillStyle = `rgba(255,255,255,${flicker})`;
    ctx.textAlign = 'center';
    ctx.shadowBlur = 30;
    ctx.shadowColor = 'white';
    ctx.fillText('Đ ♥ Y', centerX, centerY - 30);
    ctx.font = '28px Arial';
    ctx.fillStyle = `rgba(255,255,255,${0.3 + 0.2 * Math.sin(Date.now() / 200)})`;
    ctx.fillText('1st Anniversary', centerX, centerY + 30);
  }

  requestAnimationFrame(animate);
}

generateHeartPoints();
createParticles(1600);
animate();
</script>
</body>
</html>
